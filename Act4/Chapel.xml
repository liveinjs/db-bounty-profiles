<Profile>

<Name>Cursed Chapel</Name>

<KillMonsters>True</KillMonsters>
<PickupLoot>true</PickupLoot>
<GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />

<Order>

<If condition="Me.IsInTown ">
	<!--Act 1 WP-->
	<If condition="CurrentWorldId == 332336">
		<UseWaypoint questId="1" stepId="1" actorId="223757" x="401.7305" y="555.0093" z="24.90835" waypointNumber="45"/>
	</If>
	<!--Act 2 WP-->
	<If condition="CurrentWorldId == 161472">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="324.8699" y="291.0312" z="1.645629" waypointNumber="45"/> 
	</If>
	<!--Act 3/4 WP-->
	<If condition="CurrentWorldId == 172909">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="402.5403" y="414.342" z="1.5338" waypointNumber="45"/> 
	</If>
	<!--Act 4 WP-->
	<If condition="CurrentWorldId == 304235">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="557.5455" y="525.3394" z="2.796465" waypointNumber="45"/> 
	</If>
	<WaitTimer questId="1" stepId="1" waitTime="1000" />
</If>
	<BountyAtStep questSNO="369878" step="4">
	<If condition="CurrentWorldId == 129305">
	<ToggleTargeting questId="1" combat="true" looting="true" killRadius="10" lootRadius="10" />  
	<AWTrinityExploreDungeon questId="312429" stepId="2" until="ObjectFound" objectDistance="300" actorId="365097" boxTolerance="0.55" boxSize="15" ignoreMarkers="False">
	<PrioritizeScenes>
        <PriorityScene sceneName="a4dun_spire_corrupt_SE_02" pathPrecision="40" />          
    </PrioritizeScenes>
	</AWTrinityExploreDungeon>
      <MoveToActor questId="312429" stepId="2" actorId="365097"/>
	  <WaitTimer questId="312429" stepId="2" waitTime="1000" />
	  <TrinityIfSNOInRange snoid="364559" range="30">
	  <ToggleTargeting questId="1" combat="True" looting="True" killRadius="40" lootRadius="90" />  
	  </TrinityIfSNOInRange>
	  </If>
	</BountyAtStep>
	
	<!-- Duplicate to handle getting interrupted by the other cursed chest, couldn't find a more elegant solution -->
	<BountyAtStep questSNO="369878" step="4">
	<If condition="CurrentWorldId == 129305">
	<ToggleTargeting questId="1" combat="true" looting="true" killRadius="10" lootRadius="10" />  
	<AWTrinityExploreDungeon questId="312429" stepId="2" until="ObjectFound" objectDistance="300" actorId="365097" boxTolerance="0.55" boxSize="15" ignoreMarkers="False">
	<PrioritizeScenes>
        <PriorityScene sceneName="a4dun_spire_corrupt_SE_02" pathPrecision="40" />          
    </PrioritizeScenes>
	</AWTrinityExploreDungeon>
      <MoveToActor questId="312429" stepId="2" actorId="365097"/>
	  <WaitTimer questId="312429" stepId="2" waitTime="1000" />
	  <TrinityIfSNOInRange snoid="364559" range="30">
	  <ToggleTargeting questId="1" combat="True" looting="True" killRadius="40" lootRadius="90" />  
	  </TrinityIfSNOInRange>
	  </If>
	</BountyAtStep>

    <!-- Portal Home -->
    <TrinityTownPortal questId="312429" stepId="2" />
    <WaitTimer questId="312429" stepId="2" waitTime="2500" />
	<LoadProfile file="act4.xml" />
</Order>
</Profile>