<Profile>

<Name>Clear the Clan of the Moon Cave</Name>

<KillMonsters>True</KillMonsters>
<PickupLoot>true</PickupLoot>
<GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />
<Order>
  <If condition="Me.IsInTown==False">
  <LoadProfile profile="act1.xml" />
  </If>
<If condition="Me.IsInTown ">
	<!--Act 1 WP-->
	<If condition="CurrentWorldId == 332336">
		<UseWaypoint questId="1" stepId="1" actorId="223757" x="401.7305" y="555.0093" z="24.90835" waypointNumber="13"/>
	</If>
	<!--Act 2 WP-->
	<If condition="CurrentWorldId == 161472">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="324.8699" y="291.0312" z="1.645629" waypointNumber="13"/> 
	</If>
	<!--Act 3/4 WP-->
	<If condition="CurrentWorldId == 172909">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="402.5403" y="414.342" z="1.5338" waypointNumber="13"/> 
	</If>
	<!--Act 4 WP-->
	<If condition="CurrentWorldId == 304235">
		<UseWaypoint questId="1" stepId="1" actorId="6442" x="557.5455" y="525.3394" z="2.796465" waypointNumber="13"/> 
	</If>
	<WaitTimer questId="1" stepId="1" waitTime="1000" />
</If>

	<HaveBounty questId="344547">
    <!--Find cave 1-->
    <If condition="CurrentWorldId == 71150">
      <SafeMoveTo questId="1" stepId="2" x="2188.627" y="4504.445" z="-0.3508204" />
      <SafeMoveTo questId="1" stepId="2" x="2188.627" y="4504.445" z="-0.3508204" />
    </If>
    <!--Enter cave 1-->
    <If condition="CurrentWorldId == 71150">
      <MoveToActor questId="1" stepId="2" actorId="176008" isPortal="True" destinationWorldId="82502"/>
    </If>
    <!--Find cave 2-->
    <If condition="CurrentWorldId == 71150">
      <SafeMoveTo questId="1" stepId="2" x="2431.127" y="4249.725" z="0.3582907" />
      <SafeMoveTo questId="1" stepId="2" x="2431.127" y="4249.725" z="0.3582907" />
    </If>
    <!--Enter cave 2-->
    <If condition="CurrentWorldId == 71150">
      <MoveToActor questId="1" stepId="2" actorId="176008" isPortal="True" destinationWorldId="82502"/>
    </If>
    <!--Find cave 2-->
    <If condition="CurrentWorldId == 71150">
      <SafeMoveTo questId="1" stepId="2" x="2183.475" y="4028.584" z="-1.920981" />
      <SafeMoveTo questId="1" stepId="2" x="2183.475" y="4028.584" z="-1.920981" />
    </If>
    <!--Enter cave 2-->
    <If condition="CurrentWorldId == 71150">
      <MoveToActor questId="1" stepId="2" actorId="176008" isPortal="True" destinationWorldId="82502"/>
    </If>
    
    <!--Explore for Caves-->
    <If condition="CurrentWorldId == 71150">
        <TrinityExploreDungeon stayAfterBounty="False" questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ExitFound" exitNameHash="-1187439574" ignoreMarkers="False"/>
			<MoveToMapMarker questId="1" stepId="2" exitNameHash="-1187439574" destinationWorldId="82502" interactRange="20"  />
		</If>
		<If condition="CurrentWorldId == 82502">
			<WaitTimer questId="1" stepId="2" waitTime="1000" />
			<TrinityExploreDungeon stayAfterBounty="False" questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ExitFound" exitNameHash="-1187439573" ignoreMarkers="False">
				<PrioritizeScenes>
					<PriorityScene sceneName="Exit" />
				</PrioritizeScenes>
			</TrinityExploreDungeon>
			<MoveToMapMarker questId="1" stepId="2" exitNameHash="-1187439573" destinationWorldId="82511" interactRange="20"  />
			<WaitTimer questId="72095" stepId="11" waitTime="1000" />
		</If>
		<If condition="CurrentWorldId == 82511">
			<TrinityExploreDungeon stayAfterBounty="False" questId="1" stepId="2" until="FullyExplored" boxTolerance=".10" boxSize="9" />
			<WaitTimer questId="1" stepId="2" waitTime="1000" />
		</If>
	</HaveBounty>

    <!-- Portal Home -->
    <TrinityTownPortal questId="1" stepId="2" />
    <WaitTimer questId="1" stepId="2" waitTime="2500" />
<LoadProfile file="act1.xml" />
</Order>
</Profile>