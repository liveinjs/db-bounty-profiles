<Profile>
  <Name>Clear_CavensOfFrost2</Name>
  <KillMonsters>True</KillMonsters>
  <PickupLoot>true</PickupLoot>
  <GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />

  <Order>
    <If condition="HasQuest(346190)">

      <While condition="CurrentWorldId != 95804 and CurrentWorldId != 189259 and CurrentWorldId != 221688">
        <UseWaypoint questId="1" waypointNumber="32" />
        <WaitTimer questId="1" stepId="1" waitTime="2500"/>
      </While>

      <If condition="CurrentWorldId == 95804">
        <!-- <TrinityExploreDungeon questId="346190" stepId="1" until="ObjectFound" actorId="176003" boxTolerance="0.10" boxSize="15" />-->
        <!--<SafeMoveTo questId="312429" stepId="2" x="3287" y="598" z="0" pathPrecision="5" pathPointLimit="250" />
        <TrinityExploreDungeon questId="346190" stepId="2" until="ExitFound" exitNameHash="1029056444" actorId="176003" sceneName="Exit" pathPrecision="25" boxSize="25" boxTolerance="0.4" objectDistance="45">
          <AlternateActors>
            <AlternateActor actorId="0" objectDistance="45" />
          </AlternateActors>
          <PriorityScenes>
            <PriorityScene sceneName="a3_Battlefield_Sub120_DemonGenericA" />
          </PriorityScenes>
          <IgnoreScenes>
            <IgnoreScene sceneName="a3_Battlefield_ChokepointB_B" />
            <IgnoreScene sceneName="a3_Battlefield_ChokepointB_E02_S01" />
            <IgnoreScene sceneName="a3dun_Bridge_NS_03_Chokepoint" />
          </IgnoreScenes>
        </TrinityExploreDungeon>-->

        <While condition="CurrentLevelAreaId != 191078 and CurrentLevelAreaId != 189345">
          <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="20"/>
          <TrinityMoveTo questId="1" x="3323.488" y="551.1579" z="-2.377436" pathPrecision="8" name="Checking Cave #1" statusText="Checking Cave #1"/>
          <If condition="ActorExistsAt(176003, 3308, 549, -2, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
          <TrinityMoveTo questId="1" x="3320.75" y="410.0144" z="-3.845823" pathPrecision="8" name="Checking Cave #2" statusText="Checking Cave #2"/>
          <If condition="ActorExistsAt(176003, 3307, 411, -4, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
          <TrinityMoveTo questId="1" x="3465.353" y="369.0619" z="-0.4137125" pathPrecision="8" name="Checking Cave #3" statusText="Checking Cave #3"/>
          <If condition="ActorExistsAt(176003, 3447, 366, -4, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
          <TrinityMoveTo questId="1" x="3035.214" y="408.7432" z="-4.10374" pathPrecision="8" name="Checking Cave #4" statusText="Checking Cave #4"/>
          <If condition="ActorExistsAt(176003, 3023, 409, -2, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
          <TrinityMoveTo questId="1" x="3030.403" y="790.0083" z="-3.980673" pathPrecision="8" name="Checking Cave #5" statusText="Checking Cave #5"/>
          <If condition="ActorExistsAt(176003, 3018, 789, -2, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
          <TrinityMoveTo questId="1" x="3272.278" y="790.381" z="-3.124261" pathPrecision="8" name="Checking Cave #6" statusText="Checking Cave #6"/>
          <If condition="ActorExistsAt(176003, 3258, 789, -2, 40)">
            <LogMessage output="==== Found a Cave ===="/>
            <UseObject questId="1" stepId="1" actorId="176003" interactRange="40"/>
            <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="0"/>
            <WaitTimer questId="1" stepId="1" waitTime="200"/>
          </If>
        </While>
        
        <WaitTimer questId="1" stepId="2" waitTime="500" />
        <MoveToMapMarker questId="346190" stepId="2" markerNameHash="1029056444" actorId="176003" interactRange="20"
        pathPrecision="5" pathPointLimit="250" isPortal="True" destinationWorldId="189259"  />
        <WaitTimer questId="1" stepId="2" waitTime="500" />
      </If>

      <If condition="CurrentWorldId == 189259">
        <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="40" killRadius="20"/>
        <TrinityExploreDungeon questId="346190" stepId="2" until="ExitFound" exitNameHash="151580180" actorId="176038" pathPrecision="25" boxSize="25" boxTolerance="0.1" objectDistance="45">
          <AlternateActors>
            <AlternateActor actorId="0" objectDistance="45" />
          </AlternateActors>
          <PriorityScenes>
            <PriorityScene sceneName="Exit" />
          </PriorityScenes>
          <IgnoreScenes>
            <IgnoreScene sceneName="_N_" />
            <IgnoreScene sceneName="_S_" />
            <IgnoreScene sceneName="_E_" />
            <IgnoreScene sceneName="_W_" />
          </IgnoreScenes>
        </TrinityExploreDungeon>
        <!--<TrinityExploreDungeon questId="346190" stepId="1" until="ObjectFound" actorId="176038" boxTolerance="0.10" boxSize="15" />-->
        <MoveToMapMarker questId="346190" stepId="2" markerNameHash="151580180" actorId="176038" interactRange="15"
        pathPrecision="5" pathPointLimit="250" isPortal="True" destinationWorldId="221688"  />
        <WaitTimer questId="1" stepId="2" waitTime="500" />
      </If>
      <If condition="CurrentWorldId == 221688">
		<TrinitySetQuesting />
        <TrinityExploreDungeon questId="346190" stepId="2" until="BountyComplete" boxTolerance="0.2" boxSize="15" ignoreMarkers="False" />
      </If>
    </If>

    <LoadProfile file="act3.xml" />
  </Order>
</Profile>