<!-- X1_Bounty_A1_OldTristram_Event_DeathCellar (369944) -->
<Profile>
<Name>The Cursed Cellar (369944)</Name>
<KillMonsters>True</KillMonsters>
<PickupLoot>true</PickupLoot>
<GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />
<TargetBlacklists>
	<TargetBlacklist actorId="5747" /> <!-- trDun_Cath_Chandelier_Trap_Switch2-15223 -->
	<TargetBlacklist actorId="365097" /> <!-- Cursed Chest -->
	<TargetBlacklist actorId="364601" /> <!-- Cursed Shrine -->
</TargetBlacklists>
<Order>
		<ToggleTargeting questId="1" stepId="2" killRadius="5" />
	<If condition="Me.IsInTown==False"><TrinityTownPortal questId="1" /></If>	
	<UseWaypoint waypointNumber="1" questId="1"/>
	<WaitTimer questId="1" stepId="2" waitTime="2000" />
	<If condition="HasQuest(369944)">
		<If condition="CurrentWorldId == 71150">
		<!-- find cellar -->
			<SafeMoveTo questId="1" stepId="2" x="2005" y="2758" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 1 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 2005, 2758, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="1994" y="2652" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 2 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 1994, 2652, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="1991" y="2596" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 3 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 1991, 2596, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="2109" y="2507" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 4 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 2109, 2507, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="2263" y="2499" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 5 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 2263, 2499, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="2304" y="2545" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 6 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 2304, 2545, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			<SafeMoveTo questId="1" stepId="2" x="2284" y="2557" z="-0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Location 7 of 7"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(1107870150, 2284, 2557, -1, 30)">
				<MoveToActor questId="1" stepId="2" actorId="176007" isPortal="True" destinationWorldId="106752" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
		</If>		
		<!-- we should be in cellar -->
		<If condition="CurrentWorldId == 106752">		
			<!-- Start the event -->
			<ToggleTargeting questId="1" stepId="2" killRadius="80" looting="True" />	
			<SafeMoveTo questId="1" stepId="2" x="122" y="128" z="-0" />
			<MoveToActor questId="1" stepId="2" timeout="10000" actorId="365097"/>			
			<!-- If not completed, keep killing things until it is complete-->
			<If condition="HasQuest(369944)">
				<TrinityExploreDungeon questId="1" stepId="2" until="BountyComplete" boxTolerance="0.10" boxSize="15" stayAfterBounty="False"/>
			</If>
			<!-- Go back to the chest location in case fighting mobs moved us out of range. -->
			<SafeMoveTo questId="1" stepId="2" x="128.015" y="125.9703" z="0.1" />			
			<MoveToActor questId="1" stepId="2" timeout="5000" actorId="365097"/>
			<WaitTimer questId="1" stepId="2" waitTime="500" />		
		</If>		
	</If>
	<!-- give legendaries a moment to fall from the heavens... -->
	<WaitTimer questId="1" stepId="2" waitTime="3000" />
	<LoadProfile file="act1.xml" />	
</Order>
</Profile>