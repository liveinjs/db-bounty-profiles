<!-- X1_Bounty_A1_Cemetery_Event_MatriarchsBones (349020)  -->
<!-- mod by kyriakos -->
<Profile>
<Name>The Matriarchs Bones (349020)</Name>
<KillMonsters>True</KillMonsters>
<PickupLoot>true</PickupLoot>
<GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />
<TargetBlacklists>
	<TargetBlacklist actorId="3892" /> <!-- Lady Dunhyld -->
</TargetBlacklists>
<Order>
	<If condition="Me.IsInTown==False"><TrinityTownPortal questId="1" /></If>
	<UseWaypoint waypointNumber="7" questId="1"/>
	<WaitTimer questId="1" stepId="2" waitTime="5000" />
	
	<If condition="HasQuest(349020)">
		<LogMessage message="looking for marker" />
		<If condition="CurrentWorldId == 71150">
		
			<SafeMoveTo questId="1" stepId="2" x="2032" y="1776" z="1" pathPrecision="5" pathPointLimit="250" statusText="" name="Crypt Location North"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(-1965109038, 2032.983, 1776.411, 1.434785, 30)">
				<LogMessage message="found marker in North (2161, 1826) - moving there" />
				<MoveToActor questId="1" stepId="2" actorId="176002" isPortal="True" destinationWorldId="72636" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
			
			<SafeMoveTo questId="1" stepId="2" x="2233" y="1793" z="-4" pathPrecision="5" pathPointLimit="250" statusText="" name="Crypt Location South"/>	
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(-1965109038, 2233, 1793, 6, 30)">
				<LogMessage message="found marker in West (2233, 1793) - moving there" />
				<MoveToActor questId="1" stepId="2" actorId="176002" isPortal="True" destinationWorldId="72636" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>		
			
			<SafeMoveTo questId="1" stepId="2" x="2062" y="1950" z="-5" pathPrecision="5" pathPointLimit="250" statusText="" name="Crypt Location East"/>
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(-1965109038, 2062, 1950, -5, 30)">
				<LogMessage message="found marker in East (2062, 1950) - moving there" />
				<MoveToActor questId="1" stepId="2" actorId="176002" isPortal="True" destinationWorldId="72636" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>		
			
			<SafeMoveTo questId="1" stepId="2" x="2173" y="1941" z="6" pathPrecision="5" pathPointLimit="250" statusText="" name="Crypt Location West"/> 
			<If condition="CurrentWorldId == 71150 and MarkerExistsAt(-1965109038, 2173, 1941, -4, 30)">
				<LogMessage message="found marker in South (2173, 1941) - moving there" />
				<MoveToActor questId="1" stepId="2" actorId="176002" isPortal="True" destinationWorldId="72636" interactRange="20"  />
				<WaitTimer questId="1" stepId="2" waitTime="2000" />
			</If>
		</If>
	
	<!--  Defiled Crypt -->
	<If condition="CurrentLevelAreaId == 83264">
		<WaitTimer questId="1" stepId="2" waitTime="2000" />

		<!-- Find and talk to Lady Dunhyld -->
			<TrinityUseOnce id="999">
				<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ObjectFound" actorId="103772" objectDistance="150" ignoreMarkers="True">
					<PriorityScenes>
						<PriorityScene sceneName="_1000dead_"/> <!-- Event Area -->
					</PriorityScenes>
					<IgnoreScenes>
						<IgnoreScene sceneName="_N_0" />
						<IgnoreScene sceneName="_S_0" />
						<IgnoreScene sceneName="_E_0" />
						<IgnoreScene sceneName="_W_0" />
					</IgnoreScenes>	
				</TrinityExploreDungeon>
				<TrinityMoveToSNO questId="1" snoid="103772" pathPrecision="8" />			
				<TrinityLog questId="1" output="Found Lady Dunhyld, interacting with her." />
				<TrinityMoveToSNO questId="1" snoid="3892" pathPrecision="8" />
				<TrinityInteract questID="1" snoid="3892" />
				<WaitTimer questId="1" stepId="2" waitTime="3000" />
			</TrinityUseOnce>
		
		<!-- bowl 1 -->
		<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ObjectFound" actorId="102079" objectDistance="30" ignoreMarkers="False"/>
		<MoveToActor questId="1" stepId="2"  actorId="102079" interactRange="8" />
		<TrinityMoveToSNO questId="1" snoid="102079 " pathPrecision="8" />
		<TrinityIfSNOInRange snoid="102079 " range="8">
			<TrinityUseOnce id="998">
				<TrinityLog questId="1" output="Interact with bowl 1." />
				<TrinityInteract questID="1" snoid="102079 " />
			</TrinityUseOnce>
		</TrinityIfSNOInRange>
		
		<!-- bowl 2 -->
		<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ObjectFound" actorId="174753" objectDistance="30" ignoreMarkers="False"/>
		<MoveToActor questId="1" stepId="2"  actorId="174753" interactRange="8" />
		<TrinityMoveToSNO questId="1" snoid="174753 " pathPrecision="8" />
		<TrinityIfSNOInRange snoid="174753 " range="8">
			<TrinityUseOnce id="997">
				<TrinityLog questId="1" output="Interact with bowl 2." />
				<TrinityInteract questID="1" snoid="174753 " />
			</TrinityUseOnce>
		</TrinityIfSNOInRange>
		
		<!-- bowl 3 -->
		<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ObjectFound" actorId="174754" objectDistance="30" ignoreMarkers="False"/>
		<MoveToActor questId="1" stepId="2"  actorId="174754" interactRange="8" />
		<TrinityMoveToSNO questId="1" snoid="174754 " pathPrecision="8" />
		<TrinityIfSNOInRange snoid="174754 " range="8">
			<TrinityUseOnce id="996">
				<TrinityLog questId="1" output="Interact with bowl 3." />
				<TrinityInteract questID="1" snoid="174754 " />
			</TrinityUseOnce>
		</TrinityIfSNOInRange>
		
		<!-- Coffin -->
		<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.18" boxSize="20" until="ObjectFound" actorId="105754" objectDistance="30" ignoreMarkers="False"/>
		<MoveToActor questId="1" stepId="2"  actorId="105754" interactRange="8" />
		<TrinityMoveToSNO questId="1" snoid="105754 " pathPrecision="8" />
		<TrinityIfSNOInRange snoid="105754 " range="8">
			<TrinityUseOnce id="995">
				<TrinityLog questId="1" output="Interact with coffin." />
				<TrinityInteract questID="1" snoid="105754 " />
			</TrinityUseOnce>
		</TrinityIfSNOInRange>		
	</If>
				
	</If>	
			
	<!-- Wait for Loot -->
	<WaitTimer questId="1" stepId="2" waitTime="4000" />
	<!-- make sure bounty is complete! -->
	<TrinityExploreDungeon questId="1" stepId="2" until="BountyComplete" pathPrecision="20" boxTolerance="0.10" boxSize="15" stayAfterBounty="False"/>	
	<WaitTimer questId="1" stepId="2" waitTime="1000" />
	
	<LoadProfile file="act1.xml" />
	
</Order>
</Profile>