<!-- X1_Bounty_A1_Fields_Event_CultistLegion (365401) -->
<Profile>
<Name>The Cursed Mill (365401)</Name>
<KillMonsters>True</KillMonsters>
<PickupLoot>true</PickupLoot>
<GameParams act="OpenWorld" resumeFromSave="False" isPrivate="True" numGames="-1" />
<Order>

	<If condition="Me.IsInTown==False"><TrinityTownPortal questId="1" /></If>	
	<UseWaypoint waypointNumber="9" questId="1"/>
	<WaitTimer questId="1" stepId="2" waitTime="2000" />	
	<If condition="HasQuest(365401)">

		<ToggleTargeting questId="1" stepId="1" killRadius="15" />	
	
		<!-- To the Old Mill Location -->
		<SafeMoveTo questId="312429" stepId="2" x="1300" y="791" z="61" pathPrecision="5" pathPointLimit="250" statusText="Moving to Old Mills Location" /> 
		<SafeMoveTo questId="312429" stepId="2" x="1349" y="855" z="61" pathPrecision="5" pathPointLimit="250" statusText="Moving to Old Mills Location" /> 
		<SafeMoveTo questId="312429" stepId="2" x="1492" y="770" z="40" pathPrecision="5" pathPointLimit="250" statusText="Moving to Old Mills Location" /> 	

		<While condition="ActorExistsAt(364601, Me.Position.X, Me.Position.Y, Me.Position.Z, 300)">		
			<MoveToActor questId="312429" stepId="2" timeout="5000" actorId="364601" interactRange="11" name="x1_Event_CursedShrine-21318"  pathPrecision="5" pathPointLimit="250" statusText="" /> 																
		</While>
		
		<!-- Try the Fields Location #1 -->		
		<If condition="HasQuest(365401)">		
		
			<SafeMoveTo questId="312429" stepId="2" x="1515" y="852" z="38" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #1" /> 
			<SafeMoveTo questId="312429" stepId="2" x="1565" y="851" z="35" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #1" /> 
			<SafeMoveTo questId="312429" stepId="2" x="1594" y="779" z="4" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #1" /> 
			<SafeMoveTo questId="312429" stepId="2" x="1769" y="805" z="0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #1" /> 
			<SafeMoveTo questId="312429" stepId="2" x="1916" y="729" z="0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #1" /> 		
		
			<While condition="ActorExistsAt(364601, Me.Position.X, Me.Position.Y, Me.Position.Z, 300)">				
				<MoveToActor questId="312429" stepId="2" timeout="5000" actorId="364601" interactRange="11" name="x1_Event_CursedShrine-21318"  pathPrecision="5" pathPointLimit="250" statusText="" /> 													
			</While>
			
		</If>	

		<!-- Try the Fields Location #2 -->		
		<If condition="HasQuest(365401)">		
		
			<SafeMoveTo questId="312429" stepId="2" x="1915" y="626" z="0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #2" /> 
			<SafeMoveTo questId="312429" stepId="2" x="1940" y="378" z="0" pathPrecision="5" pathPointLimit="250" statusText="Moving to Fields Location #2" /> 
		
			<While condition="ActorExistsAt(364601, Me.Position.X, Me.Position.Y, Me.Position.Z, 300)">				
				<MoveToActor questId="312429" stepId="2" timeout="5000" actorId="364601" interactRange="11" name="x1_Event_CursedShrine-21318"  pathPrecision="5" pathPointLimit="250" statusText="" /> 																	
			</While>
			
		</If>	

		<!-- If we haven't found the shrine yet, explore -->
		<If condition="HasQuest(365401)">
			
			<TrinityExploreDungeon questId="1" stepId="2" boxTolerance="0.10" boxSize="12" until="ObjectFound" actorId="364601" ignoreMarkers="False" />
			<MoveToActor questId="312429" stepId="2"  actorId="364601" interactRange="11" name="x1_Event_CursedShrine-21318"  pathPrecision="5" pathPointLimit="250" statusText="" /> 
			
			<!-- Waves are pretty quick but throw in a wait just in case -->
			<If condition="HasQuest(365401)">		
				<WaitTimer questId="1" stepId="1" waitTime="4000" />
			</If>			
			<If condition="HasQuest(365401)">
				<WaitTimer questId="1" stepId="1" waitTime="4000" />
			</If>				
			
		</If>			

	
	</If>
	<LoadProfile file="act1.xml" />
	
</Order>
</Profile>